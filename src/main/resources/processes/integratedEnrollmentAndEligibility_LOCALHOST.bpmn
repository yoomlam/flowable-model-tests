<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:design="http://flowable.org/design" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://flowable.org/test" design:palette="flowable-core-process-palette">
  <process id="integratedEnrollmentAndEligibilityDemo" name="Integrated Enrollment and Eligibility Demo" isExecutable="true" flowable:candidateStarterGroups="flowableUser">
    <extensionElements>
      <design:stencilid><![CDATA[BPMNDiagram]]></design:stencilid>
      <design:creationdate><![CDATA[2023-08-04T12:36:45.315Z]]></design:creationdate>
      <design:modificationdate><![CDATA[2023-08-23T23:13:46.909Z]]></design:modificationdate>
    </extensionElements>
    <userTask id="makesDetermination" name="Makes determination" flowable:dueDate="P5D">
      <extensionElements>
        <design:stencilid><![CDATA[FormTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
      </extensionElements>
    </userTask>
    <userTask id="verifiesIncome" name="Verifies income" flowable:dueDate="P5D">
      <extensionElements>
        <design:stencilid><![CDATA[FormTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
      </extensionElements>
    </userTask>
    <serviceTask id="sendApprovalNotification" name="Sends approval notification" flowable:parallelInSameTransaction="false" flowable:type="http">
      <extensionElements>
        <flowable:field name="requestMethod">
          <flowable:string><![CDATA[POST]]></flowable:string>
        </flowable:field>
        <flowable:field name="requestUrl">
          <flowable:expression><![CDATA[http://localhost:3000/api/applications/${applicationId}/notifications]]></flowable:expression>
        </flowable:field>
        <flowable:field name="requestHeaders">
          <flowable:string><![CDATA[Content-Type: application/json]]></flowable:string>
        </flowable:field>
        <flowable:field name="requestBody">
          <flowable:string><![CDATA[{"notice_type":"approved"}]]></flowable:string>
        </flowable:field>
        <flowable:field name="disallowRedirects">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="ignoreException">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveRequestVariables">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseParameters">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseParametersTransient">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseVariableAsJson">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <design:stencilid><![CDATA[HttpTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
      </extensionElements>
    </serviceTask>
    <serviceTask id="sendDenialNotification" name="Sends denial notification" flowable:parallelInSameTransaction="false" flowable:type="http">
      <extensionElements>
        <flowable:field name="requestMethod">
          <flowable:string><![CDATA[POST]]></flowable:string>
        </flowable:field>
        <flowable:field name="requestUrl">
          <flowable:expression><![CDATA[http://localhost:3000/api/applications/${applicationId}/notifications]]></flowable:expression>
        </flowable:field>
        <flowable:field name="requestHeaders">
          <flowable:string><![CDATA[Content-Type: application/json]]></flowable:string>
        </flowable:field>
        <flowable:field name="requestBody">
          <flowable:string><![CDATA[{"notice_type":"denied"}]]></flowable:string>
        </flowable:field>
        <flowable:field name="disallowRedirects">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="ignoreException">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveRequestVariables">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseParameters">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseParametersTransient">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseVariableAsJson">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <design:stencilid><![CDATA[HttpTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
      </extensionElements>
    </serviceTask>
    <serviceTask id="checksEligibility" name="Checks eligibility" flowable:parallelInSameTransaction="false" flowable:type="http">
      <extensionElements>
        <flowable:field name="requestMethod">
          <flowable:string><![CDATA[POST]]></flowable:string>
        </flowable:field>
        <flowable:field name="requestUrl">
          <flowable:string><![CDATA[http://localhost:3000/api/eligibility]]></flowable:string>
        </flowable:field>
        <flowable:field name="requestHeaders">
          <flowable:string><![CDATA[Content-Type: application/json]]></flowable:string>
        </flowable:field>
        <flowable:field name="requestBody">
          <flowable:expression><![CDATA[{"monthly_income_in_cents":${applicationIncome}}]]></flowable:expression>
        </flowable:field>
        <flowable:field name="disallowRedirects">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="responseVariableName">
          <flowable:string><![CDATA[eligibilityResponse]]></flowable:string>
        </flowable:field>
        <flowable:field name="ignoreException">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveRequestVariables">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseParameters">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseParametersTransient">
          <flowable:string><![CDATA[false]]></flowable:string>
        </flowable:field>
        <flowable:field name="saveResponseVariableAsJson">
          <flowable:string><![CDATA[true]]></flowable:string>
        </flowable:field>
        <design:stencilid><![CDATA[HttpTask]]></design:stencilid>
        <design:stencilsuperid><![CDATA[Task]]></design:stencilsuperid>
      </extensionElements>
    </serviceTask>
    <exclusiveGateway id="splitOnProgramType" name="Program type?" default="bpmnSequenceFlow_6">
      <extensionElements>
        <design:stencilid><![CDATA[Exclusive_Databased_Gateway]]></design:stencilid>
        <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
      </extensionElements>
    </exclusiveGateway>
    <exclusiveGateway id="bpmnGateway_7" default="bpmnSequenceFlow_10">
      <extensionElements>
        <design:stencilid><![CDATA[Exclusive_Databased_Gateway]]></design:stencilid>
      </extensionElements>
    </exclusiveGateway>
    <exclusiveGateway id="bpmnGateway_8" default="bpmnSequenceFlow_14">
      <extensionElements>
        <design:stencilid><![CDATA[Exclusive_Databased_Gateway]]></design:stencilid>
      </extensionElements>
    </exclusiveGateway>
    <startEvent id="applicationSubmitted" name="Application submitted" flowable:initiator="initiator">
      <extensionElements>
        <design:stencilid><![CDATA[StartNoneEvent]]></design:stencilid>
        <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
      </extensionElements>
    </startEvent>
    <endEvent id="applicationProcessed" name="Application processed">
      <extensionElements>
        <design:stencilid><![CDATA[EndNoneEvent]]></design:stencilid>
        <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
      </extensionElements>
    </endEvent>
    <sequenceFlow id="bpmnSequenceFlow_3" sourceRef="makesDetermination" targetRef="sendApprovalNotification">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_11" sourceRef="verifiesIncome" targetRef="bpmnGateway_8">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_12" sourceRef="sendApprovalNotification" targetRef="applicationProcessed">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_5" sourceRef="sendDenialNotification" targetRef="applicationProcessed">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_8" sourceRef="checksEligibility" targetRef="bpmnGateway_7">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_4" name="Energy" sourceRef="splitOnProgramType" targetRef="makesDetermination">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        <design:labelrotation><![CDATA[0]]></design:labelrotation>
        <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
      </extensionElements>
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${vars:equals(benefitProgramName, 'energy')}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_6" name="Food" sourceRef="splitOnProgramType" targetRef="checksEligibility">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        <design:labelrotation><![CDATA[0]]></design:labelrotation>
        <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_9" name="Eligible (income &lt; $1,000)" sourceRef="bpmnGateway_7" targetRef="verifiesIncome">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        <design:labelrotation><![CDATA[0]]></design:labelrotation>
        <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
      </extensionElements>
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${eligibilityResponse.eligible}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_10" name="Not eligible (income &gt;= $1,000)" sourceRef="bpmnGateway_7" targetRef="sendDenialNotification">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
        <design:labelrotation><![CDATA[0]]></design:labelrotation>
        <design:display_ref_in_diagram><![CDATA[true]]></design:display_ref_in_diagram>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_13" sourceRef="bpmnGateway_8" targetRef="makesDetermination">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${vars:equals(sufficient_proof_of_income_response, 'is_sufficient')}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_14" sourceRef="bpmnGateway_8" targetRef="sendDenialNotification">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
    <sequenceFlow id="bpmnSequenceFlow_2" sourceRef="applicationSubmitted" targetRef="splitOnProgramType">
      <extensionElements>
        <design:stencilid><![CDATA[SequenceFlow]]></design:stencilid>
      </extensionElements>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_integratedEnrollmentAndEligibilityDemo">
    <bpmndi:BPMNPlane bpmnElement="integratedEnrollmentAndEligibilityDemo" id="BPMNPlane_integratedEnrollmentAndEligibilityDemo">
      <bpmndi:BPMNShape bpmnElement="makesDetermination" id="BPMNShape_makesDetermination">
        <omgdc:Bounds height="80.0" width="100.0" x="657.0" y="219.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="verifiesIncome" id="BPMNShape_verifiesIncome">
        <omgdc:Bounds height="80.0" width="100.0" x="657.0" y="423.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sendApprovalNotification" id="BPMNShape_sendApprovalNotification">
        <omgdc:Bounds height="80.0" width="100.0" x="999.0" y="219.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sendDenialNotification" id="BPMNShape_sendDenialNotification">
        <omgdc:Bounds height="80.0" width="100.0" x="1165.0" y="353.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="checksEligibility" id="BPMNShape_checksEligibility">
        <omgdc:Bounds height="80.0" width="100.0" x="537.0" y="619.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="splitOnProgramType" id="BPMNShape_splitOnProgramType">
        <omgdc:Bounds height="40.0" width="40.0" x="383.0" y="239.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bpmnGateway_7" id="BPMNShape_bpmnGateway_7">
        <omgdc:Bounds height="40.0" width="40.0" x="687.0" y="639.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="bpmnGateway_8" id="BPMNShape_bpmnGateway_8">
        <omgdc:Bounds height="40.0" width="40.0" x="807.0" y="443.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="applicationSubmitted" id="BPMNShape_applicationSubmitted">
        <omgdc:Bounds height="30.0" width="30.0" x="250.0" y="244.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="applicationProcessed" id="BPMNShape_applicationProcessed">
        <omgdc:Bounds height="28.0" width="28.0" x="1201.0" y="245.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_11" id="BPMNEdge_bpmnSequenceFlow_11" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="20.0" flowable:targetDockerY="20.0">
        <omgdi:waypoint x="757.0" y="463.0"></omgdi:waypoint>
        <omgdi:waypoint x="807.0" y="463.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_10" id="BPMNEdge_bpmnSequenceFlow_10" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="727.0" y="659.0"></omgdi:waypoint>
        <omgdi:waypoint x="1215.0" y="659.0"></omgdi:waypoint>
        <omgdi:waypoint x="1215.0" y="433.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_9" id="BPMNEdge_bpmnSequenceFlow_9" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="707.0" y="639.0"></omgdi:waypoint>
        <omgdi:waypoint x="707.0" y="503.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_13" id="BPMNEdge_bpmnSequenceFlow_13" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="816.9581589958159" y="453.0418410041841"></omgdi:waypoint>
        <omgdi:waypoint x="707.0" y="344.0"></omgdi:waypoint>
        <omgdi:waypoint x="707.0" y="299.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_12" id="BPMNEdge_bpmnSequenceFlow_12" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="1099.0" y="259.0"></omgdi:waypoint>
        <omgdi:waypoint x="1201.0" y="259.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_14" id="BPMNEdge_bpmnSequenceFlow_14" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="847.0" y="463.0"></omgdi:waypoint>
        <omgdi:waypoint x="1215.0" y="463.0"></omgdi:waypoint>
        <omgdi:waypoint x="1215.0" y="433.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_3" id="BPMNEdge_bpmnSequenceFlow_3" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="757.0" y="259.0"></omgdi:waypoint>
        <omgdi:waypoint x="999.0" y="259.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_4" id="BPMNEdge_bpmnSequenceFlow_4" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="423.0" y="259.0"></omgdi:waypoint>
        <omgdi:waypoint x="657.0" y="259.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_2" id="BPMNEdge_bpmnSequenceFlow_2" flowable:sourceDockerX="15.0" flowable:sourceDockerY="15.0" flowable:targetDockerX="20.0" flowable:targetDockerY="20.0">
        <omgdi:waypoint x="280.0" y="259.0"></omgdi:waypoint>
        <omgdi:waypoint x="383.0" y="259.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_8" id="BPMNEdge_bpmnSequenceFlow_8" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="20.0" flowable:targetDockerY="20.0">
        <omgdi:waypoint x="637.0" y="659.0"></omgdi:waypoint>
        <omgdi:waypoint x="687.0" y="659.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_5" id="BPMNEdge_bpmnSequenceFlow_5" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="1215.0" y="353.0"></omgdi:waypoint>
        <omgdi:waypoint x="1215.0" y="273.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="bpmnSequenceFlow_6" id="BPMNEdge_bpmnSequenceFlow_6" flowable:sourceDockerX="20.0" flowable:sourceDockerY="20.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="403.0" y="279.0"></omgdi:waypoint>
        <omgdi:waypoint x="403.0" y="659.0"></omgdi:waypoint>
        <omgdi:waypoint x="537.0" y="659.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>